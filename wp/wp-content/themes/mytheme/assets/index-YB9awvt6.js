import{d as h,r as a,p as y,q as k,a as v,c as x,b as d,t as b,k as f,P as S,v as I,y as A,z as B,o as i,_ as C}from"./index-Bxpq43On.js";import{P as E}from"./Pagination-C-6Nculv.js";import{B as N}from"./Breadcrumbs-DK2zOzf2.js";const L={class:"Page"},w={key:1},D=5,_=10,G=h({__name:"index",setup(M){const t=a(),m=y(),o=a([]);m.fetchCategories().then(()=>{var e;t.value=m.categories.find(s=>s.id===Number(p)),t.value&&o.value.push({text:(e=t.value)==null?void 0:e.name})});const g=I(),p=g.params.id,r=a([]),n=a(!1),l=a(0),c=a(1),u=async()=>{if(n.value)return!1;n.value=!0;const e={categories:[Number(p)],perPage:_,page:c.value},s=await A(e);r.value=s.posts,l.value=s.total,await B(),n.value=!1,console.log("posts",r.value),console.log("total",l.value)};u().catch(e=>console.error(e)),k(()=>g.params.id,e=>{e&&(console.log("newId",e),c.value=1,u())});const P=e=>{c.value=e,u()};return(e,s)=>(i(),v("section",L,[o.value&&o.value.length?(i(),x(N,{key:0,items:o.value},null,8,["items"])):d("",!0),t.value?(i(),v("h1",w,"カテゴリー「"+b(t.value.name)+"」の一覧",1)):d("",!0),f(S,{posts:r.value,isLoading:n.value},null,8,["posts","isLoading"]),f(E,{currentPage:c.value,maxDisplayPages:D,itemsPerPage:_,total:l.value,"onOnClick:pageNumber":P},null,8,["currentPage","total"])]))}}),q=C(G,[["__scopeId","data-v-c6a2f66f"]]);export{q as default};
